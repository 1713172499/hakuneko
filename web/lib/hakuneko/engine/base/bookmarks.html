<link rel="import" href="bookmark.html">

<script>

    /**
     * Base class for common BookmarkManager class implementation
     */
    class BookmarkManager {

        constructor() {
            //this.x = undefined;
            this.bookmarks = [];
        }

        load() {
            let manga = {
                id: '',
                title: '',
                connector: {
                    id: '',
                    label: ''
                }
            };

            manga.connector.id = 'dynasty-scans';
            manga.connector.label = 'DynastyScans';
            manga.id = '/series/a_zone';
            manga.title = 'A-Zone';
            this.bookmarks.push( new Bookmark( manga ) );

            manga.connector.id = 'kissmanga-cdn';
            manga.connector.label = 'KissMAnga (CDN)';
            manga.id = '5690139690926080';
            manga.title = '"Gokko"';
            this.bookmarks.push( new Bookmark( manga ) );

            manga.connector.id = 'invalid';
            manga.connector.label = 'INVALID';
            manga.id = '5690139690926080';
            manga.title = '"Gokko"';
            this.bookmarks.push( new Bookmark( manga ) );

            manga.connector.id = 'mangafox';
            manga.connector.label = 'MangaFox';
            manga.id = 'invalid';
            manga.title = 'INVALID';
            this.bookmarks.push( new Bookmark( manga ) );
            /*
            this.bookmarks.sort( ( a, b ) => {
                return ( a.title.manga.toLowerCase() < b.title.manga.toLowerCase() ? -1 : 1 );
            });
            */
        }

        save() {
            //
        }

        addBookmark( manga ) {
            if( !manga || ! manga.connector ) {
                return false;
            }
            let index = this.bookmarks.findIndex( ( bookmark ) => {
                return ( bookmark.key.manga === manga.id && bookmark.key.connector === manga.connector.id );
            });
            if( index < 0 ) {
                this.bookmarks.push( new Bookmark( manga ) );
                return true;
            }
            return false;
        }

        deleteBookmark( bookmarkID ) {
            let index = this.bookmarks.findIndex( ( bookmark ) => {
                return ( bookmark.id === bookmarkID );
            });
            if( index > -1 ) {
                this.bookmarks.splice( index, 1 );
                return true;
            }
            return false;
        }
    }
    BookmarkManager; // reference the class to prevent removal of the class through js-minify

</script>